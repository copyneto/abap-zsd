sap.ui.define(["sap/m/PDFViewer"],function(e){"use strict";return{onActionDownload:function(t){var s=this;var n=sap.ui.getCore().byId(this.oView.sId+"--responsiveTable").getSelectedItems();if(!n.length){sap.m.MessageToast.show("Nenhum registro selecionad+
o.");return}var o=new sap.m.Dialog({contentWidth:"300px",resizable:true,type:"Message"});o.setTitle("Download");if(n.length==1){var i=new sap.m.Text({text:"Deseja baixar os formulários fiscais do documento selecionado?"})}else{var i=new sap.m.Text({text:+
"Deseja baixar os formulários fiscais dos "+n.length+" documentos selecionados?"})}var a=new sap.m.Button({text:"Baixar",type:"Accept",press:function(){o.close();o.destroy();var t="/sap/opu/odata/SAP/ZSD_IMPRESSAO_NF_SRV/";var s=new sap.ui.model.odata.OD+
ataModel(t,false);var i=[];for(let e=0;e<n.length;e++){var a=n[e].getBindingContext().getObject();var r=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("Docnum",sap.ui.model.FilterOperator.EQ,a.Docnum)]});i.push(r)}function u(e){const t=Date.no+
w();let s=null;do{s=Date.now()}while(s-t<e)}var l=function(){return new Promise(function(n,o){s.read("/downloadCheckSet",{filters:[new sap.ui.model.Filter(i,true)],success:function(s,o){for(let n=0;n<s.results.length;n++){if(!s.results[n].Value){continue+
}var i=t+"downloadSet(Docnum='"+s.results[n].Docnum+"',Doctype='"+s.results[n].Doctype+"')/$value";var a=new e;this.getView().addDependent(a);a.setSource(i);a.downloadPDF();u(2e3)}n()}.bind(this),error:function(e){o()}.bind(this)})}.bind(this))}.bind(thi+
s);this.extensionAPI.securedExecution(l,{busy:{set:true,check:false},sActionLabel:"Mensagens"})}.bind(this)});var r=new sap.m.Button({text:"Cancelar",type:"Reject",press:function(){o.close();o.destroy();this.getView().removeAllDependents()}.bind(this)});+
o.addContent(i);o.setBeginButton(r);o.setEndButton(a);o.open()},showSuccessMessage:function(e){this.getView().setBusy(false)},showErrorMessage:function(e){this.getView().setBusy(false)},delay:function(e){return new Promise(t=>setTimeout(t,e))}}});        