sap.ui.define(["sap/m/PDFViewer"],function(e){"use strict";return{onAfterRendering:function(){debugger;let e=sap.ui.getCore().byId("br.com.trescoracoes.nfdwlmassa::sap.suite.ui.generic.template.ListReport.view.ListReport::ZC_SD_NF_IMP_MASSA--responsiveTa+
ble").getModel();e.attachRequestCompleted(this.onCheckItems,this)},onCheckItems:function(e){let t=sap.ui.getCore().byId("br.com.trescoracoes.nfdwlmassa::sap.suite.ui.generic.template.ListReport.view.ListReport::ZC_SD_NF_IMP_MASSA--responsiveTable").getMo+
del();let s=this;t.detachRequestCompleted(s.onCheckItems,s);let o=sap.ui.getCore().byId("br.com.trescoracoes.nfdwlmassa::sap.suite.ui.generic.template.ListReport.view.ListReport::ZC_SD_NF_IMP_MASSA--listReport");o.attachDataReceived(function(e){sap.ui.ge+
tCore().byId("br.com.trescoracoes.nfdwlmassa::sap.suite.ui.generic.template.ListReport.view.ListReport::ZC_SD_NF_IMP_MASSA--responsiveTable-sa").setSelected(true);sap.ui.getCore().byId("br.com.trescoracoes.nfdwlmassa::sap.suite.ui.generic.template.ListRe+
port.view.ListReport::ZC_SD_NF_IMP_MASSA--responsiveTable-sa").fireSelect()})},onActionDownload:function(t){var s=this;var o=sap.ui.getCore().byId(this.oView.sId+"--responsiveTable").getSelectedItems();if(!o.length){sap.m.MessageToast.show("Nenhum regist+
ro selecionado.");return}var i=new sap.m.Dialog({contentWidth:"300px",resizable:true,type:"Message"});i.setTitle("Download");if(o.length==1){var n=new sap.m.Text({text:"Deseja baixar os formulários fiscais do documento selecionado?"})}else{var n=new sap.+
m.Text({text:"Deseja baixar os formulários fiscais dos "+o.length+" documentos selecionados?"})}var a=new sap.m.Button({text:"Baixar",type:"Accept",press:function(){i.close();i.destroy();var t="/sap/opu/odata/SAP/ZSD_IMPRESSAO_NF_SRV/";var s=new sap.ui.m+
odel.odata.ODataModel(t,false);var n=[];for(let e=0;e<o.length;e++){var a=o[e].getBindingContext().getObject();var r=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("Docnum",sap.ui.model.FilterOperator.EQ,a.Docnum)]});n.push(r)}function c(e){co+
nst t=Date.now();let s=null;do{s=Date.now()}while(s-t<e)}var l=function(){return new Promise(function(o,i){s.read("/downloadCheckSet",{filters:[new sap.ui.model.Filter(n,true)],success:function(s,i){for(let o=0;o<s.results.length;o++){if(!s.results[o].Va+
lue){continue}var n=t+"downloadSet(Docnum='"+s.results[o].Docnum+"',Doctype='"+s.results[o].Doctype+"')/$value";var a=new e;this.getView().addDependent(a);a.setSource(n);a.downloadPDF();c(2e3)}o()}.bind(this),error:function(e){i()}.bind(this)})}.bind(thi+
s))}.bind(this);this.extensionAPI.securedExecution(l,{busy:{set:true,check:false},sActionLabel:"Mensagens"})}.bind(this)});var r=new sap.m.Button({text:"Cancelar",type:"Reject",press:function(){i.close();i.destroy();this.getView().removeAllDependents()}.+
bind(this)});i.addContent(n);i.setBeginButton(r);i.setEndButton(a);i.open()},showSuccessMessage:function(e){this.getView().setBusy(false)},showErrorMessage:function(e){this.getView().setBusy(false)},delay:function(e){return new Promise(t=>setTimeout(t,e)+
)}}});                                                                                                                                                                                                                                                         