sap.ui.define([],                                                                                                                                                                                                                                              
function (){                                                                                                                                                                                                                                                   
    "use strict";                                                                                                                                                                                                                                              
    return {                                                                                                                                                                                                                                                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        ExibirHistorico: function(oEvent) {                                                                                                                                                                                                                    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
               /* ===================================================================                                                                                                                                                                          
               Recupera dados dos campos das linhas selecionadas                                                                                                                                                                                               
                =================================================================== */&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                           
                var oSelection = this.extensionAPI.getSelectedContexts();                                                                                                                                                                                      
               // var oItemSalesOrder = oSelection[0].getObject().SalesOrder;                                                                                                                                                                                  
               // var oItemRemessa = oSelection[0].getObject().Remessa;                                                                                                                                                                                        
               // var oItemNotaFiscal = oSelection[0].getObject().NotaFiscal;                                                                                                                                                                                  
               var oItemSalesOrder = [];                                                                                                                                                                                                                       
               var oItemRemessa    = [];                                                                                                                                                                                                                       
               var oItemNotaFiscal = [];                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
               for (let i = 0; i < oSelection.length; i++) {                                                                                                                                                                                                   
                   oItemSalesOrder[i] = oSelection[i].getObject().SalesOrder;                                                                                                                                                                                  
                   oItemRemessa[i]    = oSelection[i].getObject().Remessa;                                                                                                                                                                                     
                   oItemNotaFiscal[i] = oSelection[i].getObject().NotaFiscal;                                                                                                                                                                                  
               }                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                /* ===================================================================                                                                                                                                                                         
                Verifica se usuário tem permissão para navegação                                                                                                                                                                                               
                =================================================================== */                                                                                                                                                                         
                sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported([                                                                                                                                                          
                    { target: { shellHash: "histagendamento-display?SalesOrder=" + oItemSalesOrder + ",Remessa=" + oItemRemessa + ",DocNum=" + oItemNotaFiscal } }                                                                                             
                ])                                                                                                                                                                                                                                             
                    .done(function (aResponse) {                                                                                                                                                                                                               
                        aResponse.map(function (elem, index) {                                                                                                                                                                                                 
                            if (elem.supported === true) {                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                /* ===================================================================                                                                                                                                                         
                                Chama outro aplicativo                                                                                                                                                                                                         
                                =================================================================== */                                                                                                                                                         
                                var href_parameters = (sap.ushell && sap.ushell.Container &&                                                                                                                                                                   
                                    sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({                                                                                                                                            
                                        target: { semanticObject: "histagendamento", action: "display" },                                                                                                                                                      
                                        params: { SalesOrder : oItemSalesOrder,                                                                                                                                                                                
                                                  Remessa : oItemRemessa,                                                                                                                                                                                      
                                                  DocNum : oItemNotaFiscal                                                                                                                                                                                     
                                                },                                                                                                                                                                                                             
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n+
bsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
                                    }));                                                                                                                                                                                                                       
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                   
                                sap.m.URLHelper.redirect(href_parameters, false);                                                                                                                                                                              
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                            }                                                                                                                                                                                                                                  
                            else {                                                                                                                                                                                                                             
                                alert('Usuário sem permissão para acessar o link');                                                                                                                                                                            
                            }                                                                                                                                                                                                                                  
                        })                                                                                                                                                                                                                                     
                    })                                                                                                                                                                                                                                         
                    .fail(function () {                                                                                                                                                                                                                        
                        alert('Falha ao acessar o link');                                                                                                                                                                                                      
                    });                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
        ExibirOcorrencia: function(oEvent) {                                                                                                                                                                                                                   
&nbsp;&nbsp;                                                                                                                                                                                                                                                   
               /* ===================================================================                                                                                                                                                                          
               Recupera dados dos campos das linhas selecionadas                                                                                                                                                                                               
                =================================================================== */&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                           
                var oSelection = this.extensionAPI.getSelectedContexts();                                                                                                                                                                                      
                var oUnidadeFrete = oSelection[0].getObject().UnidadeFrete;                                                                                                                                                                                    
                //var oOrdemFrete = oSelection[0].getObject().OrdemFrete;                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                /* ===================================================================                                                                                                                                                                         
                Verifica se usuário tem permissão para navegação                                                                                                                                                                                               
                =================================================================== */                                                                                                                                                                         
                sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported([                                                                                                                                                          
                    { target: { shellHash: "FreightUnit-change?FreightUnit" + oUnidadeFrete } }                                                                                                                                                                
                   // { target: { shellHash: "FreightOrder-displayRoad?FreightOrder=" + oOrdemFrete } }                                                                                                                                                        
                                                                                                                                                                                                                                                               
                ])                                                                                                                                                                                                                                             
                    .done(function (aResponse) {                                                                                                                                                                                                               
                        aResponse.map(function (elem, index) {                                                                                                                                                                                                 
                            if (elem.supported === true) {                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                /* ===================================================================                                                                                                                                                         
                                Chama outro aplicativo                                                                                                                                                                                                         
                                =================================================================== */                                                                                                                                                         
                                var href_parameters = (sap.ushell && sap.ushell.Container &&                                                                                                                                                                   
                                    sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({                                                                                                                                            
                                        target: { semanticObject: "FreightUnit", action: "change" },                                                                                                                                                           
                                        params: {FreightUnit : oUnidadeFrete&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                         
                                       // target: { semanticObject: "FreightOrder", action: "display" },                                                                                                                                                       
                                       // params: { FreightOrder : oOrdemFrete&nbsp;&nbsp;&nbsp;                                                                                                                                                               
&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                       
                                                },&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
                                    }));                                                                                                                                                                                                                       
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                   
                                sap.m.URLHelper.redirect(href_parameters, false);                                                                                                                                                                              
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                            }                                                                                                                                                                                                                                  
                            else {                                                                                                                                                                                                                             
                                alert('Usuário sem permissão para acessar o link');                                                                                                                                                                            
                            }                                                                                                                                                                                                                                  
                        })                                                                                                                                                                                                                                     
                    })                                                                                                                                                                                                                                         
                    .fail(function () {                                                                                                                                                                                                                        
                        alert('Falha ao acessar o link');                                                                                                                                                                                                      
                    });                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
        ExibirItem: function(oEvent) {                                                                                                                                                                                                                         
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                             
            /* ===================================================================                                                                                                                                                                             
            Recupera dados dos campos das linhas selecionadas                                                                                                                                                                                                  
             =================================================================== */&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                              
             var oSelection = this.extensionAPI.getSelectedContexts();                                                                                                                                                                                         
             var oSalesOrders = [];                                                                                                                                                                                                                            
             var oPlant = [];                                                                                                                                                                                                                                  
             var oDate = [];                                                                                                                                                                                                                                   
&nbsp;                                                                                                                                                                                                                                                         
             for (let i = 0; i < oSelection.length; i++) {                                                                                                                                                                                                     
                 oSalesOrders[i] = oSelection[i].getObject().SalesOrder;                                                                                                                                                                                       
                 oPlant[i] = oSelection[i].getObject().Plant;                                                                                                                                                                                                  
                 oDate[i] = oSelection[i].getObject().CreationDate;                                                                                                                                                                                            
             }                                                                                                                                                                                                                                                 
&nbsp;                                                                                                                                                                                                                                                         
&nbsp;                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
             /* ===================================================================                                                                                                                                                                            
             Verifica se usuário tem permissão para navegação                                                                                                                                                                                                  
             =================================================================== */                                                                                                                                                                            
             sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported([                                                                                                                                                             
                 { target: { shellHash: "ckptagensdamentoitem-display?SalesOrder=" + oSalesOrders } }                                                                                                                                                          
             ])                                                                                                                                                                                                                                                
                 .done(function (aResponse) {                                                                                                                                                                                                                  
                     aResponse.map(function (elem, index) {                                                                                                                                                                                                    
                         if (elem.supported === true) {                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
                             /* ===================================================================                                                                                                                                                            
                             Chama outro aplicativo                                                                                                                                                                                                            
                             =================================================================== */                                                                                                                                                            
                             var href_parameters = (sap.ushell && sap.ushell.Container &&                                                                                                                                                                      
                                 sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({                                                                                                                                               
                                     target: { semanticObject: "ckptagensdamentoitem", action: "display" },                                                                                                                                                    
                                     params: { SalesOrder : oSalesOrders  },                                                                                                                                                                                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n+
bsp;&nbsp;                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                                 }));                                                                                                                                                                                                                          
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                     
                             sap.m.URLHelper.redirect(href_parameters, false);                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                         }                                                                                                                                                                                                                                     
                         else {                                                                                                                                                                                                                                
                             alert('Usuário sem permissão para acessar o link');                                                                                                                                                                               
                         }                                                                                                                                                                                                                                     
                     })                                                                                                                                                                                                                                        
                 })                                                                                                                                                                                                                                            
                 .fail(function () {                                                                                                                                                                                                                           
                     alert('Falha ao acessar o link');                                                                                                                                                                                                         
                 });                                                                                                                                                                                                                                           
     }                                                                                                                                                                                                                                                         
    };                                                                                                                                                                                                                                                         
});                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               