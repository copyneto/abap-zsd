sap.ui.define(                                                                                                                                                                                                                                                 
    [],                                                                                                                                                                                                                                                        
    function () {                                                                                                                                                                                                                                              
        "use strict";                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
        return {                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            handleUploadPress: function (e) {                                                                                                                                                                                                                  
                /* ===================================================================&nbsp;                                                                                                                                                                   
                Define o serviço gateway que será chamado                                                                                                                                                                                                      
                =================================================================== */                                                                                                                                                                         
                var sServiceUrl = "/sap/opu/odata/SAP/ZSD_ORDEM_VENDAS_UPLD_SRV/";                                                                                                                                                                             
                var oModel = new sap.ui.model.odata.ODataModel(sServiceUrl, false);                                                                                                                                                                            
                var sSource = sServiceUrl + "excelSet";                                                                                                                                                                                                        
                    var oFileUploader = this.byId("fileUploader");                                                                                                                                                                                             
                    // var oFileUploader =new sap.ui.unified.FileUploader({width: "100%" ,uploadComplete:function(e){                                                                                                                                          
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                               
                    //&nbsp;                                                                                                                                                                                                                                   
                    // }.bind(this) });&nbsp;                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                     
               /* ===================================================================&nbsp;                                                                                                                                                                    
               Define parâmetros                                                                                                                                                                                                                               
               =================================================================== */&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                  
                    oFileUploader.setName("Simple Uploader");                                                                                                                                                                                                  
                    oFileUploader.setUploadUrl(sSource);                                                                                                                                                                                                       
                    oFileUploader.setSendXHR(true);                                                                                                                                                                                                            
                    oFileUploader.setUseMultipart(false);                                                                                                                                                                                                      
                    oFileUploader.setUploadOnChange(false);                                                                                                                                                                                                    
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                               
                var oToken = new sap.ui.unified.FileUploaderParameter({                                                                                                                                                                                        
                    name: "x-csrf-token",                                                                                                                                                                                                                      
                    value: oModel.getSecurityToken()                                                                                                                                                                                                           
                });&nbsp;                                                                                                                                                                                                                                      
                oFileUploader.insertHeaderParameter(oToken);                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
                var domRef = oFileUploader.getFocusDomRef();                                                                                                                                                                                                   
                var file = domRef.files[0];                                                                                                                                                                                                                    
                if (oFileUploader.getValue() === "") {                                                                                                                                                                                                         
                    sap.m.MessageToast.show("Favor selecionar um arquivo");                                                                                                                                                                                    
                    return                                                                                                                                                                                                                                     
                }                                                                                                                                                                                                                                              
                var oContentType  = new sap.ui.unified.FileUploaderParameter({                                                                                                                                                                                 
                        name: "Content-Type",                                                                                                                                                                                                                  
                        value: file.type                                                                                                                                                                                                                       
                    });                                                                                                                                                                                                                                        
                    oFileUploader.insertHeaderParameter(oContentType);                                                                                                                                                                                         
                // var r = p.getSelectedButton().mProperties.text[0];                                                                                                                                                                                          
                // o.insertHeaderParameter(new sap.ui.unified.FileUploaderParameter({                                                                                                                                                                          
                //     name: "SLUG",                                                                                                                                                                                                                           
                //     value: o.getValue() + ";" + r                                                                                                                                                                                                           
                // }));                                                                                                                                                                                                                                        
                // oFileUploader.upload()                                                                                                                                                                                                                      
                oFileUploader.checkFileReadable().then(function() {                                                                                                                                                                                            
                    oFileUploader.upload();                                                                                                                                                                                                                    
                }, function(error) {                                                                                                                                                                                                                           
                    MessageToast.show("The file cannot be read. It may have changed.");                                                                                                                                                                        
                }).then(function() {                                                                                                                                                                                                                           
                    oFileUploader.clear();                                                                                                                                                                                                                     
                });                                                                                                                                                                                                                                            
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
            },                                                                                                                                                                                                                                                 
            handleUploadComplete: function (oEvent) {                                                                                                                                                                                                          
                var oUploadDialog = this.byId("fileUploader");                                                                                                                                                                                                 
                 // Atualiza tabela do relatório após carga                                                                                                                                                                                                    
                //  var sId = this.oView.sId + '--responsiveTable';                                                                                                                                                                                            
                //  var oTable = this.byId(sId);                                                                                                                                                                                                               
                //  oTable.getModel().refresh(true);                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                //  oUploadDialog.close();                                                                                                                                                                                                                     
                //  oUploadDialog.destroy();                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
                if (oEvent.mParameters.status == "200" || oEvent.mParameters.status == "201") {                                                                                                                                                                
                            sap.m.MessageToast.show("Carga realizada com sucesso.")                                                                                                                                                                            
                        } else {                                                                                                                                                                                                                               
                            sap.m.MessageToast.show("Erro ao Executar arquivo, recarregue a página e tente novamente")                                                                                                                                         
                            if (oEvent.mParameters.response) {                                                                                                                                                                                                 
                                alert("Return Code: " + oEvent.mParameters.response, +                                                                                                                                                                         
                                    "Response", "Response")                                                                                                                                                                                                    
                            }                                                                                                                                                                                                                                  
                        }                                                                                                                                                                                                                                      
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
        };                                                                                                                                                                                                                                                     
    });                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               